
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
  
    // For seeding: TEMPORARILY allow writes to all collections
    // This should be locked down after seeding is complete
    match /{document=**} {
       allow read, write: if true;
    }

    // Lock down user data
    // match /users/{userId} {
    //   allow read, write: if request.auth != null && request.auth.uid == userId;
    // }

    // Make curriculum content publicly readable
    // match /levels/{levelId} {
    //   allow read: if true;
    //   allow write: if false; // Or add admin rules
    // }
    // match /classYears/{yearId} {
    //   allow read: if true;
    //   allow write: if false;
    // }
    // match /subjects/{subjectId} {
    //   allow read: if true;
    //   allow write: if false;
    // }
    // match /lessons/{lessonId} {
    //   allow read: if true;
    //   allow write: if false;
    // }
    // match /recordedSessions/{sessionId} {
    //   allow read: if true;
    //   allow write: if false;
    // }
    // match /exercises/{exerciseId} {
    //   allow read: if true;
    //   allow write: if false;
    // }

    // Comments can be read by anyone, but only created/edited/deleted by authenticated users
    // match /comments/{commentId} {
    //   allow read: if true;
    //   allow create, update, delete: if request.auth != null;
    //   // Optional: allow only owner to edit/delete
    //   // allow update, delete: if request.auth != null && request.auth.uid == resource.data.user.id;
    // }
  }
}
